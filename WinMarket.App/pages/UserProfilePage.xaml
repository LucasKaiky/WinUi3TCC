<Page
    x:Class="WinMarket.App.pages.UserProfilePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid Padding="24">
        <StackPanel Spacing="16" MaxWidth="900" HorizontalAlignment="Center">
            <TextBlock Text="Perfil" FontSize="32" FontWeight="SemiBold"/>

            <Border Background="{ThemeResource SolidBackgroundFillColorSecondaryBrush}" CornerRadius="16" Padding="24">
                <Grid ColumnSpacing="24" RowSpacing="12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <PersonPicture Width="96" Height="96" DisplayName="{Binding CurrentUser.FullName}"/>

                    <StackPanel Grid.Column="1" Spacing="4" VerticalAlignment="Center">
                        <TextBlock Text="{Binding CurrentUser.FullName}" FontSize="24" FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding CurrentUser.Username}" Opacity="0.7"/>
                        <TextBlock Text="{Binding CurrentUser.Email}"/>
                    </StackPanel>
                </Grid>
            </Border>

            <Grid ColumnSpacing="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition x:Name="ColLeft" Width="*"/>
                    <ColumnDefinition x:Name="ColRight" Width="*"/>
                </Grid.ColumnDefinitions>

                <Border Background="{ThemeResource SolidBackgroundFillColorSecondaryBrush}" CornerRadius="12" Padding="20">
                    <StackPanel Spacing="8">
                        <TextBlock Text="Contato" FontSize="18" FontWeight="SemiBold"/>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE717;"/>
                            <TextBlock Text="{Binding CurrentUser.Phone}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE119;"/>
                            <TextBlock Text="{Binding CurrentUser.Email}"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <Border x:Name="RightCard" Grid.Column="1" Background="{ThemeResource SolidBackgroundFillColorSecondaryBrush}" CornerRadius="12" Padding="20" Margin="16,0,0,0">
                    <StackPanel Spacing="8">
                        <TextBlock Text="EndereÃ§o" FontSize="18" FontWeight="SemiBold"/>
                        <TextBlock>
                            <Run Text="{Binding CurrentUser.Address.Street}"/>
                            <Run Text=", "/>
                            <Run Text="{Binding CurrentUser.Address.Number}"/>
                        </TextBlock>
                        <TextBlock>
                            <Run Text="{Binding CurrentUser.Address.City}"/>
                            <Run Text=" - "/>
                            <Run Text="{Binding CurrentUser.Address.Zipcode}"/>
                        </TextBlock>
                    </StackPanel>
                </Border>

                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup>
                        <VisualState x:Name="Narrow">
                            <VisualState.StateTriggers>
                                <AdaptiveTrigger MinWindowWidth="0"/>
                            </VisualState.StateTriggers>
                            <VisualState.Setters>
                                <Setter Target="ColLeft.Width" Value="*"/>
                                <Setter Target="ColRight.Width" Value="0"/>
                                <Setter Target="RightCard.(Grid.Column)" Value="0"/>
                                <Setter Target="RightCard.Margin" Value="0,16,0,0"/>
                            </VisualState.Setters>
                        </VisualState>
                        <VisualState x:Name="Wide">
                            <VisualState.StateTriggers>
                                <AdaptiveTrigger MinWindowWidth="800"/>
                            </VisualState.StateTriggers>
                            <VisualState.Setters>
                                <Setter Target="ColLeft.Width" Value="*"/>
                                <Setter Target="ColRight.Width" Value="*"/>
                                <Setter Target="RightCard.(Grid.Column)" Value="1"/>
                                <Setter Target="RightCard.Margin" Value="16,0,0,0"/>
                            </VisualState.Setters>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
            </Grid>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Sair" Command="{Binding LogoutCommand}" />
            </StackPanel>
        </StackPanel>
    </Grid>
</Page>
